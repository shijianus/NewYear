
---

# REQUEST.md: 2026 跨时空烟花项目需求规格书 (完整版)

**项目代号**: Project Epoch
**核心目标**: 构建一个自主可控、具备历史记录功能、适配双历文化并能感知用户时区的综合性烟花庆祝平台。
**架构原则**: 四个独立界面入口，互不干扰，无全局导航条。

---

## 1. 页面架构与路由 (Page Architecture)

项目包含四个完全独立的 HTML 入口，用户根据 URL 访问不同功能：

### 1.1 Main (智能主会场)

* **入口文件**: `index.html`
* **定位**: 年度核心展示页，每年迭代更新。
* **功能**:
* 智能感知日期（阳历/阴历）。
* 智能感知用户时区/IP 位置。
* 展示倒计时与年度“史册摘要”烟花秀。


* **交互**: 首次访问显示“引导页”，点击后解锁音频并进入主场景。

### 1.2 Firecracker (纯享解压屋)

* **入口文件**: `firecracker.html`
* **定位**: 纯粹的互动娱乐，无时间压力。
* **功能**:
* **零干扰**: 移除所有文字、倒计时、标题。
* **无限模式**: 烟花自动循环燃放，永不停歇。
* **强互动**: 支持多点触控（Mobile），点击屏幕任意位置即刻燃放。
* **摇一摇**: 手机端摇动触发“清屏级”大爆炸特效。


* **背景**: 纯黑或极淡星空，最大化视觉对比度。

### 1.3 Almanac (历史年鉴)

* **路径**: `/almanac/2025/`, `/almanac/2026/` ...
* **定位**: 静态博物馆。
* **功能**:
* 每年春节结束后，建立新文件夹，将当年的 `Main` 页面（代码+资源）完整封存（手动完成的部分，不是你开发的部分，但是需要你留下这个接口用来回顾）。
* 保持当年的特定 UI、文案和烟花配置，不做修改。
* 每年手动跟新一次（腾出一个这样的窗口，方便后续可以直接新添新的文件夹（例如clmanac文件夹内的2026就是本次的这个版本，后续会逐次增加，每年开发一次新的内容）



### 1.4 Homage (初心致敬)

* **路径**: `/homage/` (即原 `old/` 目录，将原本的 old/ 文件夹重命名为 homeage/ 文件夹)
* **定位**: 纪念碑。
* **功能**: 完整保留 2024 年初代版本的原始代码和样式，仅做路径引用修复，致敬项目起源。

---

## 2. 智能时空引擎 (Time & Space Intelligence)

这是 Main 界面最核心的逻辑，需处理“时间”与“地点”两个维度。

### 2.1 基于 IP/时区的本地化跨年 (Location Awareness)

* **时区对齐**: 倒计时必须基于**用户所在地的本地时间**。即：伦敦用户在伦敦时间的 00:00 看到跨年烟花，北京用户在北京时间的 00:00 看到（这些时间和地方不在前端展示，均只在后端计算完成后直接呈现给用户最终计算得到的结果）。
* **地理位置显示 (IP-based Greeting)**:
* 尝试获取用户粗略地理位置（国家/城市）。
* *技术约束*: 尽量使用轻量级无 Key 的 API，或直接读取 `Intl.DateTimeFormat` 猜测时区名作为备选。



### 2.2 双日历主题切换 (Dual-Calendar Theme)

根据当前日期，自动加载两套完全不同的配置（UI、BGM、文案）：

* **Mode A: 阳历元旦 (Solar / International)**
* **时间范围**: 2025年12月24日 - 2026年1月15日。
* **主题色**: 科技蓝、星际黑、霓虹紫。
* **背景图**: 现代城市夜景剪影 (本地高清图)。
* **BGM**: 轻快、现代、流行/电子风格。


* **Mode B: 农历春节 (Lunar / Traditional)**
* **时间范围**: 2026年1月16日 - 3月初。
* **主题色**: 中国红、琉璃金、暖黄。
* **背景图**: 中式窗棂、灯笼纹理或红纸质感 (本地高清图)。
* **BGM**: 温暖、大气、包含民乐/管弦乐元素。

特别注意：
* 由于当前主要对于元旦进行开发，需要将内容聚焦于元旦（农历春节的可以后续再进行补充开发）
* 请先完成阳历元旦的开发（主要根据各地的文化习俗来适配标语——而不是全部死板的意译）

当前必须完成的部分功能：
* IP 地址定位+时区分辨，最后根据这些内容推送固定的内容（包括不同的标语、不同的祝福，甚至时不同的烟花粒子）
* 确定当前时间（开发日期为12/31/25），你需要现在就完成这些内容的开发，确保烟花秀再当前时间段内是正常的
* 可以借鉴以及完成的 old/ 的这些内容，但是必须进行全额的替换（虽然现在以及完成部分替换），确保符合2026年对于广众的推送
* 其它特殊的功能

---

## 3. 视觉与粒子系统 (Visuals & Particles)

### 3.1 史册摘要图阵 (History Highlights)

仅在 `Main` 页面（包括主域名，主域名和 /main/ 界面是完全相同的，不管是哪一个都是完全相同的界面，这两个界面是同一个界面）的 **00:00:00** 时刻触发。使用“粒子定点吸附”技术，按顺序展示以下图案：

1. **Icon 1 - 灵蛇 (The Snake)**: 2026 生肖，金色流畅线条或剪影。
2. **Icon 2 - 时代关键词 (AI)**: 2025 年度印记，蓝紫色科技感字体 "AI"。
3. **Icon 3 - 通用情感 (Heart)**: 红色粒子组成的爱心，带有“心跳”动态效果（缩放）。
4. **Text - 2026**: 巨型金色数字，停留 3 秒后炸裂消散。

注意：
以上粒子都是烟花爆开后留下的特殊光影色彩，请你完成定制烟花的制作，确保烟花爆开后可以形成这些图案

### 3.2 烟花物理增强
不改变已有的这些内容，只是新增一些新的粒子玩法。

* **粒子形状**: 支持圆形 (默认)、心形、五角星形。
* **打铁花特效 (Iron Flower)**: (春节限定) 粒子重力大、阻力小、密度高、颜色金黄，模拟金属熔液下坠的流苏感。
* **流星雨 (Meteors)**: 随机在背景划过，仅留长拖尾，不爆炸。（这个可以作为背景，不参与烟花）
* **速度差异**: 混合极速爆炸（清脆）和缓慢绽放（滞空时间长）的烟花。
* **颜色算法**: 使用 HSL 随机色域，拒绝单调 RGB。

---

## 4. 大众化文案系统 (Copywriting)

摒弃技术语言，使用温暖、普世的文案。文案需根据“双日历模式”自动切换。

### 4.1 顶部主标 (Header)

* **阳历版**: "2026，很高兴遇见你"
* **阴历版**: "金蛇纳福 · 岁岁平安"
* **等待期**: "正在点亮星空..." / "静候佳节"

### 4.2 底部寄语 (Footer)

* **阳历版**: "愿去年的遗憾，都是今年惊喜的铺垫。祝你永远热泪盈眶，永远向阳而生。"
* **阴历版**: "灯火可亲，家人闲坐。愿新的一年，所求皆如愿，所行皆坦途。"

### 4.3 粒子倒计时 (Particle Countdown)

* **触发**: 跨年前最后 60 秒。
* **表现**: 隐藏 HTML 文字。烟花粒子在屏幕中央动态汇聚成大数字 (60... 3, 2, 1)。
* **特效**: 数字变化时伴随“重低音心跳”音效。

---

## 5. 音频系统 (Audio)

* **资源要求**: 所有音频文件存放于 `assets/audio/`，不使用外链。
* **策略**: 默认静音，用户点击主页“Start/点亮”按钮后解锁 AudioContext。
* **音效库**:
* `bgm_solar.mp3` (元旦背景乐)
* `bgm_lunar.mp3` (春节背景乐)
* `launch.mp3` (发射咻声，随机音调)
* `explosion_small.mp3`, `explosion_large.mp3` (不同力度的爆炸声)
* `countdown_heartbeat.mp3` (倒计时心跳)
* `finale_boom.mp3` (0点整震撼音效)



---

## 6. 技术与维护要求 (Tech & Maintenance)

* **完全自主 (Autonomy)**:
* 禁止使用外部 CDN (如 Google Fonts, CDNJS)。所有 JS 库、字体文件、图片必须下载到本地目录。


* **图标**: 使用生成的黑色背景爆炸烟花 Icon ( shijianus.jpg ) 作为 Favicon。
* **归档规范**: 每年一次手动归档操作，将 `main` 移入 `almanac`。
* **代码质量**: 核心烟花逻辑封装为 Class，便于在 main 和 firecracker 页面复用。

---
